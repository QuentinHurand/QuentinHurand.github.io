<!DOCTYPE html>
<html lang="fr">
<head>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2545350053064615"
     crossorigin="anonymous"></script>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jeu de R√©flexe - Classement local</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    #gameZone {
      margin: 20px auto;
      border: 2px solid #000;
      width: 300px;
      height: 300px;
      position: relative;
      background: #f0f0f0;
      cursor: pointer;
      user-select: none;
      font-size: 2rem;
      line-height: 300px;
      color: #333;
      /* Centrer le texte verticalement et horizontalement */
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #target {
      width: 50px;
      height: 50px;
      background: green;
      position: absolute;
      border-radius: 4px;
      display: none;
      z-index: 10;
      cursor: pointer;
    }
    #leaderboard {
      margin-top: 40px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }
    .ad-space {
      margin: 20px auto;
      padding: 10px;
      background: #f9f9f9;
      min-height: 100px;
      max-width: 320px;
    }
    #restartBtn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 10px 20px;
      font-size: 1.2rem;
      display: none;
      cursor: pointer;
      z-index: 20;
    }
    #scoresList li.user-score {
      color: blue;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>‚ö° Jeu de R√©flexe</h1>

  <!-- ENCADRE PUBLICITAIRE - ici tu colles le code fourni par Google AdSense -->
  <div class="ad-space" id="ad-top">
    <!-- Exemple : -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
      crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
      style="display:block"
      data-ad-client="ca-pub-xxxxxxxxxxxxxxxx"
      data-ad-slot="1234567890"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div>
    <label for="pseudo">Entrez votre pseudo :</label>
    <input type="text" id="pseudo" placeholder="Votre pseudo" />
    <button onclick="startGame()">Commencer</button>
  </div>

  <div id="gameZone">
    <!-- Message initial affich√© -->
    Pr√™t ? Partez !
    <div id="target"></div>
    <button id="restartBtn" onclick="startGame()">Recommencer</button>
  </div>

  <h2>Temps de r√©action : <span id="reactionTime">-</span> ms</h2>

  <!-- ENCADRE PUBLICITAIRE - deuxi√®me emplacement -->
  <div class="ad-space" id="ad-bottom">
    <!-- M√™me principe, tu colles ici un autre code AdSense diff√©rent si tu veux -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
      crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
      style="display:block"
      data-ad-client="ca-pub-xxxxxxxxxxxxxxxx"
      data-ad-slot="0987654321"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div id="leaderboard">
    <h2>üèÜ Classement local </h2>
    <ol id="scoresList"></ol>
  </div>

<script>
  // Donn√©es fixes : c√©l√©brit√©s avec leurs scores (temps en ms)
  const celebrities = [
    {pseudo: 'Lewis Hamilton', score: 450},
    {pseudo: 'Serena Williams', score: 480},
    {pseudo: 'Michael Jordan', score: 520},
    {pseudo: 'Usain Bolt', score: 430},
    {pseudo: 'Marie Curie', score: 650},
    {pseudo: 'Albert Einstein', score: 700},
    {pseudo: 'Beyonc√©', score: 600},
    {pseudo: 'Cristiano Ronaldo', score: 500},
    {pseudo: 'Simone Biles', score: 470},
    {pseudo: 'Elon Musk', score: 720},
  ];

  const pseudoInput = document.getElementById('pseudo');
  const gameZone = document.getElementById('gameZone');
  const target = document.getElementById('target');
  const reactionTimeDisplay = document.getElementById('reactionTime');
  const scoresList = document.getElementById('scoresList');
  const restartBtn = document.getElementById('restartBtn');

  let startTime = 0;
  let timeoutId = null;
  let currentUserBestScore = null;

  function updateLeaderboard(userPseudo, userScore) {
    const list = [...celebrities];
    const toiIndex = list.findIndex(item => item.pseudo.startsWith('Toi'));
    if (toiIndex !== -1) {
      list[toiIndex].score = userScore;
    } else {
      list.push({pseudo: 'Toi (' + userPseudo + ')', score: userScore});
    }
    list.sort((a, b) => a.score - b.score);
    scoresList.innerHTML = '';
    list.forEach(({pseudo, score}) => {
      const li = document.createElement('li');
      li.textContent = `${pseudo} ‚Äî ${score} ms`;
      if (pseudo.startsWith('Toi')) {
        li.classList.add('user-score');
      }
      scoresList.appendChild(li);
    });
  }

  window.onload = () => {
    const pseudo = pseudoInput.value.trim();
    let userBest = null;
    if (pseudo) {
      const savedScore = localStorage.getItem('bestScore_' + pseudo.toLowerCase());
      userBest = savedScore ? parseInt(savedScore, 10) : null;
    }
    updateLeaderboard('Toi', userBest ?? 99999);
  };

  function startGame() {
    const pseudo = pseudoInput.value.trim();
    if (!pseudo) {
      alert('Veuillez entrer un pseudo.');
      return;
    }

    // Reset affichage et message initial
    reactionTimeDisplay.textContent = '-';
    target.style.display = 'none';
    restartBtn.style.display = 'none';
    gameZone.style.borderColor = '#000';
    gameZone.textContent = 'Pr√™t ? Partez !';
    gameZone.appendChild(target);
    gameZone.appendChild(restartBtn);

    const savedScore = localStorage.getItem('bestScore_' + pseudo.toLowerCase());
    currentUserBestScore = savedScore ? parseInt(savedScore, 10) : null;

    clearTimeout(timeoutId);

    // Clignotement bordure pendant 1.5s
    let visible = true;
    let blinkCount = 0;
    const maxBlinks = 3;

    const blinkInterval = setInterval(() => {
      gameZone.style.borderColor = visible ? 'red' : '#000';
      visible = !visible;
      blinkCount++;
      if (blinkCount >= maxBlinks) {
        clearInterval(blinkInterval);
        gameZone.style.borderColor = '#000';

        // Efface le message et lance le d√©lai al√©atoire
        gameZone.textContent = '';
        gameZone.appendChild(target);
        gameZone.appendChild(restartBtn);

        const delay = Math.random() * 4000 + 1000;
        timeoutId = setTimeout(() => {
          const maxX = gameZone.clientWidth - target.offsetWidth;
          const maxY = gameZone.clientHeight - target.offsetHeight;
          const x = Math.random() * maxX;
          const y = Math.random() * maxY;

          target.style.left = x + 'px';
          target.style.top = y + 'px';
          target.style.display = 'block';

          startTime = performance.now();
        }, delay);
      }
    }, 500);
  }

  target.addEventListener('click', () => {
    const endTime = performance.now();
    const reaction = Math.round(endTime - startTime);

    reactionTimeDisplay.textContent = reaction + ' ms';
    target.style.display = 'none';

    const pseudo = pseudoInput.value.trim();
    if (!pseudo) return;

    if (currentUserBestScore === null || reaction < currentUserBestScore) {
      currentUserBestScore = reaction;
      localStorage.setItem('bestScore_' + pseudo.toLowerCase(), currentUserBestScore);
    }

    updateLeaderboard(pseudo, currentUserBestScore);

    restartBtn.style.display = 'block';
  });
</script>

<button onclick="window.location.href='index.html'" style="
  position: fixed;
  top: 20px;
  left: 20px;
  padding: 10px 20px;
  font-size: 1rem;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  z-index: 9999;
">üè† Menu</button>


  
</body>
</html>

